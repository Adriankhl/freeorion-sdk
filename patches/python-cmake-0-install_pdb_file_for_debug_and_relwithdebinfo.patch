From 2dd38582082bf90a2e4cee7c95193fc3974e8c17 Mon Sep 17 00:00:00 2001
From: Marcel Metz <mmetz@adrian-broher.net>
Date: Mon, 21 Mar 2016 20:32:22 +0100
Subject: [PATCH 1/3] Install libpython pdb file when building shared libraries

---
 cmake/libpython/CMakeLists.txt | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/cmake/libpython/CMakeLists.txt b/cmake/libpython/CMakeLists.txt
index 5292748..e3a66c2 100644
--- a/cmake/libpython/CMakeLists.txt
+++ b/cmake/libpython/CMakeLists.txt
@@ -311,6 +311,13 @@ if(BUILD_SHARED)
             SOURCE ${SRC_DIR}/Modules/posixmodule.c
             APPEND PROPERTY COMPILE_DEFINITIONS WITH_NEXT_FRAMEWORK)
     endif(APPLE)
+    if((MSVC_VERSION GREATER 1500) AND (NOT CMAKE_VERSION VERSION_LESS "3.1"))
+        install(
+            FILES $<TARGET_PDB_FILE:libpython-shared>
+            DESTINATION ${LIBPYTHON_ARCHIVEDIR}
+            CONFIGURATIONS Debug RelWithDebInfo
+        )
+    endif((MSVC_VERSION GREATER 1500) AND (NOT CMAKE_VERSION VERSION_LESS "3.1"))
 endif(BUILD_SHARED)
 
 if(BUILD_STATIC)
-- 
2.5.0

