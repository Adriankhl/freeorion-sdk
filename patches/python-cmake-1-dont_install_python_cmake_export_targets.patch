From 87f36b86732489a4eff8982667d85097d75424d0 Mon Sep 17 00:00:00 2001
From: Marcel Metz <mmetz@adrian-broher.net>
Date: Mon, 21 Mar 2016 20:39:08 +0100
Subject: [PATCH 2/3] Don't export python cmake targets

---
 CMakeLists.txt                 | 6 ------
 cmake/libpython/CMakeLists.txt | 2 +-
 cmake/python/CMakeLists.txt    | 2 +-
 3 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4b2cec8..3b640a7 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -409,11 +409,5 @@ write_basic_package_version_file(
 )
 
 # Install 'PythonTargets.cmake', 'PythonConfig.cmake' and 'PythonConfigVersion.cmake
-install(EXPORT PythonTargets FILE PythonTargets.cmake DESTINATION ${CONFIG_INSTALL_DIR})
-
-install(
-    FILES ${python_install_config} ${python_config_version}
-    DESTINATION ${CONFIG_INSTALL_DIR} COMPONENT Development
-)
 
 endif(HAVE_CONFIGURE_PACKAGE_CONFIG_FILE AND HAVE_WRITE_BASIC_PACKAGE_VERSION_FILE)
diff --git a/cmake/libpython/CMakeLists.txt b/cmake/libpython/CMakeLists.txt
index e3a66c2..aa37f67 100644
--- a/cmake/libpython/CMakeLists.txt
+++ b/cmake/libpython/CMakeLists.txt
@@ -290,7 +290,7 @@ function(add_libpython name type)
     # Export target
     set_property(GLOBAL APPEND PROPERTY PYTHON_TARGETS ${name})
 
-    install(TARGETS ${name} EXPORT PythonTargets
+    install(TARGETS ${name}
         ARCHIVE DESTINATION ${LIBPYTHON_ARCHIVEDIR}
         LIBRARY DESTINATION ${LIBPYTHON_LIBDIR}
         RUNTIME DESTINATION ${LIBPYTHON_LIBDIR}
diff --git a/cmake/python/CMakeLists.txt b/cmake/python/CMakeLists.txt
index be43967..577db90 100644
--- a/cmake/python/CMakeLists.txt
+++ b/cmake/python/CMakeLists.txt
@@ -20,7 +20,7 @@ endif(BUILD_SHARED)
 # Export target
 set_property(GLOBAL APPEND PROPERTY PYTHON_TARGETS python)
 
-install(TARGETS python EXPORT PythonTargets RUNTIME DESTINATION ${BIN_INSTALL_DIR} COMPONENT Runtime)
+install(TARGETS python RUNTIME DESTINATION ${BIN_INSTALL_DIR} COMPONENT Runtime)
 
 # See "is_python_build()" in sysconfig.py
 add_custom_command(TARGET python PRE_BUILD
-- 
2.5.0

